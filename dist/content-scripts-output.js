(()=>{"use strict";function e(e){return e?.type?.split("/")[1]?.trim()??""}const t=["assets","images","pictures","figures","figs","img"];console.log("Version v1.1.0-alpha loaded!");const n=document.location.pathname+"/upload";let o;window.onload=async function(){o=await async function(){try{const e=await new Promise(((e,n)=>{const o=new MutationObserver(((n,o)=>{for(let r of n)if("childList"===r.type){let n=document.querySelectorAll("div[context-menu]");for(let r=0;r<t.length;r++)for(let i of n){let n=i.querySelector("span");if(n&&n.innerText.includes(t[r])){let t=i.getAttribute("data-target").replace("context-menu-","");return o.disconnect(),void e(t)}}}}));o.observe(document,{childList:!0,subtree:!0}),setTimeout((()=>{o.disconnect(),n(new Error("Folder not found"))}),2e4)}));if(null!==e)return e}catch(e){return console.error("Could not find a folder in your Overleaf Project beginning with the following names,"+t+"."),null}}()},document.addEventListener("paste",(function(t){o&&(async()=>{let r=(t.clipboardData||window?.clipboardData).items,i=await async function(t,n){const o=Array.from(t).filter((e=>"file"===e.kind)).map((e=>e.getAsFile())).map((async t=>{const o=await function(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=e=>{t(e.target.result)},o.onerror=n,o.readAsDataURL(e)}))}(t),r=function(t,n,o){return console.log(n.type),{targetFolderId:t,name:n.name,type:e(n),qqfile:o}}(n,t,o);return r}));return await Promise.all(o).catch((e=>(console.error("Error occured contact @simonsejse on GitHub: ",e),[])))}(r,o);if(0!==i.length){var a=document.querySelector('meta[name="ol-csrfToken"]').content;chrome.runtime.sendMessage({message:"PASTE_INVOKED",url:n,csrfToken:a,folder_id:o,images:i})}else alert("No files were successfully processed.")})()}))})();